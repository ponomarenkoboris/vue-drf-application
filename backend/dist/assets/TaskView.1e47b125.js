var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,s=(e,s)=>{for(var l in s||(s={}))a.call(s,l)&&r(e,l,s[l]);if(t)for(var l of t(s))o.call(s,l)&&r(e,l,s[l]);return e};import{r as l,e as n,s as u,d}from"./index.e4d88a3f.js";import{p as c,a as i,d as p,y as m,t as h,s as v,r as f,o as g,c as y,w as k,f as _,b as w,h as x,F as I,z as b,A as C,g as N,x as D,B as E,C as S,v as L,e as U}from"./vendor.c4bbfea9.js";c("data-v-2ef34280");const j=N(" Create Room "),G=N(" Create room "),z={key:0},A={key:1},M=N("You have not enter in room");i();var R=p({props:{roomsNames:{required:!0,type:Array},place:{type:String,required:!0}},setup(e){const t=e,a=m(),o=h({roomName:"",roomDescription:""}),r=v(!1),d=v(""),c=async()=>{if(0!==o.roomName.trim().length&&0!==o.roomDescription.trim().length)try{(await l.post(n.room,o,{headers:s({},u())})).data.success&&(t.roomsNames.push(o.roomName),r.value=!1,o.roomName="",o.roomDescription="")}catch(e){console.error(e)}};return(s,u)=>{const i=f("n-button"),p=f("n-input"),m=f("n-form"),h=f("n-space"),v=f("n-modal"),S=f("n-h2"),L=f("n-card"),U=f("n-layout-sider");return g(),y(U,{"content-style":"padding: 24px;","native-scrollbar":!1,bordered:""},{default:k((()=>[_(i,{type:"primary",block:"",style:{"margin-bottom":"10px"},onClick:u[0]||(u[0]=()=>r.value=!0)},{default:k((()=>[j])),_:1}),_(v,{class:"custom-card",show:r.value,"onUpdate:show":u[3]||(u[3]=e=>r.value=e),preset:"card",style:{width:"600px"},title:"Creating room",bordered:!1,size:"huge",segmented:{content:"soft",footer:"soft"}},{footer:k((()=>[_(h,{justify:"center"},{default:k((()=>[_(i,{type:"primary",onClick:c},{default:k((()=>[G])),_:1})])),_:1})])),default:k((()=>[_(m,null,{default:k((()=>[_(p,{style:{"margin-bottom":"20px",height:"40px"},type:"text",placeholder:"Enter room name",value:w(o).roomName,"onUpdate:value":u[1]||(u[1]=e=>w(o).roomName=e)},null,8,["value"]),_(p,{style:{height:"40px"},type:"text",placeholder:"Enter room description",value:w(o).roomDescription,"onUpdate:value":u[2]||(u[2]=e=>w(o).roomDescription=e)},null,8,["value"])])),_:1})])),_:1},8,["show"]),_(p,{placeholder:"Search",value:d.value,"onUpdate:value":u[4]||(u[4]=e=>d.value=e)},null,8,["value"]),e.roomsNames?(g(),x("div",z,[(g(!0),x(I,null,b(e.roomsNames,((e,o)=>(g(),y(L,{key:o,hoverable:"",class:C(-1!==e.indexOf(d.value)?"card_wrapper":"hide"),onClick:o=>(async e=>{if("tasks"===t.place){const t=e.replaceAll(" ","&");try{const e=await l.get(n.room+t);if(e.data.room){const{room:t}=e.data;a.commit("changeRoom",{room:t})}}catch(o){console.error(o)}}})(e)},{default:k((()=>[d.value?(g(),y(S,{key:1},{default:k((()=>[N(D(e.slice(0,e.search(d.value))),1),E("mark",null,D(e.slice(e.search(d.value),e.search(d.value)+d.value.length)),1),N(D(e.slice(e.search(d.value)+d.value.length)),1)])),_:2},1024)):(g(),y(S,{key:0},{default:k((()=>[N(D(e),1)])),_:2},1024))])),_:2},1032,["class","onClick"])))),128))])):(g(),x("div",A,[_(S,null,{default:k((()=>[M])),_:1})]))])),_:1})}}});R.__scopeId="data-v-2ef34280";const P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},T=_("path",{d:"M17 15V8h-2v7H8v2h7v7h2v-7h7v-2z",fill:"currentColor"},null,-1);var O=p({name:"Add",render:function(e,t){return g(),y("svg",P,[T])}});const V={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},B=_("path",{d:"M30 11.414L28.586 10L24 14.586L19.414 10L18 11.414L22.586 16L18 20.585L19.415 22L24 17.414L28.587 22L30 20.587L25.414 16L30 11.414z",fill:"currentColor"},null,-1),F=_("path",{d:"M4 4a2 2 0 0 0-2 2v3.17a2 2 0 0 0 .586 1.415L10 18v8a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2v-2h-2v2h-4v-8.83l-.586-.585L4 9.171V6h20v2h2V6a2 2 0 0 0-2-2z",fill:"currentColor"},null,-1);var $=p({name:"FilterRemove",render:function(e,t){return g(),y("svg",V,[B,F])}});const q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32"},H=_("path",{d:"M12 12h2v12h-2z",fill:"currentColor"},null,-1),Y=_("path",{d:"M18 12h2v12h-2z",fill:"currentColor"},null,-1),J=_("path",{d:"M4 6v2h2v20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8h2V6zm4 22V8h16v20z",fill:"currentColor"},null,-1),K=_("path",{d:"M12 2h8v2h-8z",fill:"currentColor"},null,-1);var Q=p({name:"TrashCan",render:function(e,t){return g(),y("svg",q,[H,Y,J,K])}}),W=p({props:{groupIndex:[Number,String,Symbol],groupId:Number,taskIdx:[Number,String,Symbol],id:Number,title:String,description:String,completed:Boolean,dateCreated:{required:!0,type:Date}},setup(e){const t=e,a=m(),o=async()=>{const e={groupIdx:t.groupIndex,taskIdx:t.taskIdx,status:!t.completed};try{(await l.put(n.task,{roomId:a.getters.roomId,taskStatus:e.status,taskId:t.id,taskGroupId:t.groupId},{headers:s({},u())})).data.success&&a.commit("updateTaskStatus",e)}catch(o){console.error(o)}};return(r,d)=>{const c=f("n-tag"),i=f("n-icon"),p=f("n-button"),m=f("n-space"),h=f("n-card");return g(),y(h,{title:e.title,class:C(e.completed?"task compoleted__task":"task"),onClick:o},{"header-extra":k((()=>[_(c,{style:{"margin-left":"10px"},class:C(e.completed?"task__tag":""),type:e.completed?"success":"error"},{default:k((()=>[N(D(e.completed?"Done":"In Progress"),1)])),_:1},8,["class","type"])])),footer:k((()=>[_(m,{justify:"space-between",class:"card__footer"},{default:k((()=>[E("p",null,"Date created: "+D(e.dateCreated.toLocaleDateString()),1),_(p,{type:"error",ghost:"",onClick:d[0]||(d[0]=e=>(async e=>{e.stopPropagation();const o={groupIdx:t.groupIndex,taskId:t.id};try{(await l.delete(n.task,{data:{roomId:a.getters.roomId,taskGroupId:t.groupId,taskId:t.id},headers:s({},u())})).data.success&&a.commit("removeTask",o)}catch(r){console.error()}})(e))},{default:k((()=>[_(i,{size:"15"},{default:k((()=>[_(w(Q))])),_:1})])),_:1})])),_:1})])),default:k((()=>[E("p",null,D(e.description),1)])),_:1},8,["title","class"])}}});W.__scopeId="data-v-7448f964";const X=N(" Append new task "),Z=N(" Submit ");var ee=p({props:{groupIndex:Number,groupId:Number,groupName:String,groupDescription:String,tasks:Array},setup(e){const t=e,a=m(),o=v(!1),r=h({title:"",description:""}),d=async()=>{try{const e=await l.post(n.task,{roomId:a.getters.roomId,taskTitle:r.title,taskDescription:r.description,taskGroupId:t.groupId},{headers:s({},u())});e.data.success&&e.data.task&&(a.commit("appendTask",{task:s({},e.data.task),taskGroupId:t.groupId}),o.value=!1,r.title="",r.description="")}catch(e){console.error(e)}},c=async()=>{const e={taskGroupId:t.groupId};try{(await l.delete(n.taskGroup,{data:s({roomId:a.getters.roomId},e),headers:s({},u())})).data.success&&a.commit("removeTaskGroup",e)}catch(o){console.error(o)}};return(t,a)=>{const s=f("n-icon"),l=f("n-button"),n=f("n-input"),u=f("n-form"),i=f("n-space"),p=f("n-modal"),m=f("n-card");return g(),y(m,{title:e.groupName},{"header-extra":k((()=>[_(l,{type:"error",ghost:"",onClick:c},{default:k((()=>[_(s,null,{default:k((()=>[_(w($))])),_:1})])),_:1})])),action:k((()=>[_(i,{justify:"center"},{default:k((()=>[_(l,{onClick:a[0]||(a[0]=()=>o.value=!0)},{default:k((()=>[X,_(s,null,{default:k((()=>[_(w(O))])),_:1})])),_:1}),_(p,{class:"custom-card",show:o.value,"onUpdate:show":a[3]||(a[3]=e=>o.value=e),preset:"card",style:{width:"600px"},title:"Creating task",bordered:!1,size:"huge",segmented:{content:"soft",footer:"soft"}},{footer:k((()=>[_(i,{justify:"center"},{default:k((()=>[_(l,{type:"primary",onClick:d},{default:k((()=>[Z])),_:1})])),_:1})])),default:k((()=>[_(u,null,{default:k((()=>[_(n,{style:{"margin-bottom":"20px",height:"40px"},type:"text",placeholder:"Enter task title",value:w(r).title,"onUpdate:value":a[1]||(a[1]=e=>w(r).title=e)},null,8,["value"]),_(n,{style:{height:"40px"},type:"text",placeholder:"Enter task description",value:w(r).description,"onUpdate:value":a[2]||(a[2]=e=>w(r).description=e)},null,8,["value"])])),_:1})])),_:1},8,["show"])])),_:1})])),default:k((()=>[E("h2",null,[E("strong",null,D(e.groupDescription),1)]),(g(!0),x(I,null,b(e.tasks,((t,a)=>(g(),y(W,{groupIndex:e.groupIndex,groupId:e.groupId,taskIdx:a,id:t.id,title:t.title,description:t.description,completed:t.completed,dateCreated:new Date(t.date_created)},null,8,["groupIndex","groupId","taskIdx","id","title","description","completed","dateCreated"])))),256))])),_:1},8,["title"])}}});const te=N(" Name: "),ae=N(" Description: "),oe=N("Delete room"),re=N("Users list"),se={class:"radio_wrapper"},le=N(" Appned user "),ne=N("Create new task Group");var ue,de;(de=ue||(ue={})).DELETE="remove",de.APPEND="append",de.FINDUSER="find";var ce=p({setup(e){const{getters:t,commit:a}=m(),o=S((()=>t.taskRoom)),r=v([]),c=h({name:"",description:""}),i=v(""),p=v(!1),C=v([]),j=v(null),G=v(!1);L(p,((e,t)=>{t&&(i.value=""),C.value=[],j.value=null})),l.get(n.room).then((e=>{e.data.rooms&&(r.value=e.data.rooms)})).catch((e=>{console.log(e)}));const z=S((()=>{const e=t.taskRoom.owner_username,a=[{label:"Append user",key:`${ue.FINDUSER}_`}],o=t.roomMembers.map((t=>{const a={key:t,label:t};return e!==t&&(a.children=[{label:"Remove user",key:`${ue.DELETE}_${t}`}]),a}));return a.concat(o)})),A=async()=>{const e={groupName:c.name,groupDescription:c.description};try{const t=await l.post(n.taskGroup,s({roomId:o.value.id},e),{headers:s({},u())});t.data.success&&t.data.taskGroup&&a("appendTaskGroup",t.data.taskGroup)}catch(t){console.error(t)}c.name="",c.description=""},M=async()=>{var e;const o=t.roomId;try{if((await l.delete(n.room,{data:{roomId:o},headers:s({},u())})).data.success){const o=t.taskRoom.room_name;r.value=null==(e=r.value)?void 0:e.filter((e=>e!==o)),a("clearStore")}}catch(d){console.error(d)}},P=async e=>{const[r,d]=e.split("_"),c=o.value.id;if(r===ue.DELETE)try{if((await l.delete(n.members,{data:{roomId:c,memberUserName:d},headers:s({},u())})).data.success){const e=t.roomMembers.filter((e=>e!==d)).join(",");a("updateRoomMembers",{members:e})}}catch(m){console.error(m)}if(r===ue.APPEND){const e=j.value||d;if(0===e.trim().length)return;try{if((await l.put(n.members,{roomId:c,memberUserName:e},{headers:s({},u())})).data.success){const o=Array.from(t.roomMembers);o.push(e),a("updateRoomMembers",{members:o.join(",")}),i.value="",p.value=!1}}catch(m){console.error(m)}}r===ue.FINDUSER&&(p.value=!0)},T=d((async()=>{if(0!==i.value.trim().length){G.value=!0;try{const e=await l.post(n.searchUser,{username:i.value},{headers:s({},u())});e.data.success&&e.data.users&&(C.value=e.data.users)}catch(e){console.error(e)}G.value=!1}}),1e3);return(e,t)=>{const a=f("n-gradient-text"),s=f("n-h2"),l=f("n-button"),n=f("n-dropdown"),u=f("n-space"),d=f("n-layout-header"),m=f("n-input"),h=f("n-form"),v=f("n-radio"),S=f("n-spin"),L=f("n-modal"),O=f("n-layout"),V=f("n-layout-footer");return g(),y(O,{style:{height:"90vh"}},{default:k((()=>[_(d,{style:{height:"50px"},bordered:""},{default:k((()=>[w(o).id?(g(),y(u,{key:0,justify:"center"},{default:k((()=>[_(s,null,{default:k((()=>[te,_(a,{type:"success"},{default:k((()=>[N(D(w(o).room_name),1)])),_:1})])),_:1}),_(s,null,{default:k((()=>[ae,_(a,{type:"success"},{default:k((()=>[N(D(w(o).room_description),1)])),_:1})])),_:1}),_(l,{type:"error",ghost:"",onClick:M},{default:k((()=>[oe])),_:1}),_(n,{onSelect:P,trigger:"hover",options:w(z),"show-arrow":!0,size:"huge"},{default:k((()=>[_(l,null,{default:k((()=>[re])),_:1})])),_:1},8,["options"])])),_:1})):U("",!0)])),_:1}),_(L,{class:"custom-card",show:p.value,"onUpdate:show":t[2]||(t[2]=e=>p.value=e),preset:"card",style:{"max-width":"600px"},title:"Append user to the room",bordered:!1,segmented:{content:"soft",footer:"soft"}},{footer:k((()=>[_(l,{type:"primary",block:"",onClick:t[1]||(t[1]=e=>P(`${ue.APPEND}_${i.value}`))},{default:k((()=>[le])),_:1})])),default:k((()=>[_(h,null,{default:k((()=>[_(m,{value:i.value,"onUpdate:value":t[0]||(t[0]=e=>i.value=e),placeholder:"Enter username",onInput:w(T)},null,8,["value","onInput"])])),_:1}),E("div",se,[_(S,{show:G.value},{default:k((()=>[(g(!0),x(I,null,b(C.value,((e,t)=>(g(),y(v,{class:"radio_item",key:t,checked:j.value===e,onChange:()=>j.value=e},{default:k((()=>[N(D(e),1)])),_:2},1032,["checked","onChange"])))),128))])),_:1},8,["show"])])])),_:1},8,["show"]),_(O,{position:"absolute",style:{top:"40px",bottom:"64px"},"has-sider":""},{default:k((()=>[_(R,{place:"tasks",roomsNames:r.value},null,8,["roomsNames"]),_(O,{"content-style":"padding: 24px;","native-scrollbar":!1},{default:k((()=>[_(u,null,{default:k((()=>[(g(!0),x(I,null,b(w(o).task_groups,((e,t)=>(g(),y(ee,{key:e.id,groupIndex:t,groupId:e.id,groupName:e.group_name,groupDescription:e.group_description,tasks:e.tasks},null,8,["groupIndex","groupId","groupName","groupDescription","tasks"])))),128))])),_:1})])),_:1})])),_:1}),_(V,{position:"absolute",style:{height:"64px",padding:"24px"},bordered:""},{default:k((()=>[w(o).id?(g(),y(u,{key:0,justify:"center"},{default:k((()=>[_(h,{style:{display:"flex","margin-right":"10px"}},{default:k((()=>[_(m,{style:{"margin-right":"10px"},placeholder:"Group title",value:w(c).name,"onUpdate:value":t[3]||(t[3]=e=>w(c).name=e)},null,8,["value"]),_(m,{placeholder:"Group description",value:w(c).description,"onUpdate:value":t[4]||(t[4]=e=>w(c).description=e)},null,8,["value"])])),_:1}),_(l,{type:"primary",onClick:A},{default:k((()=>[ne])),_:1})])),_:1})):U("",!0)])),_:1})])),_:1})}}});export{ce as default};
