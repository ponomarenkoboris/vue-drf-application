var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(a,s,r)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[s]=r,n=(e,a)=>{for(var s in a||(a={}))t.call(a,s)&&o(e,s,a[s]);if(r)for(var s of r(a))l.call(a,s)&&o(e,s,a[s]);return e};import{d as u,q as d,s as p,t as i,v as m,r as c,o as w,h as v,f,w as h,c as b,e as g,p as y,a as _,b as P,g as U,x as S}from"./vendor.c4bbfea9.js";import{f as N,v as j}from"./validators.53b6d36c.js";import{r as O,e as k,s as x}from"./index.e4d88a3f.js";y("data-v-81b98dbc");const I={class:"auth_wrapper"},E=U("Sign In"),C=U("Sign Up");_();var F=u({setup(e){const r=d(),t=p(!0),l=p(),o=i({username:"",firstName:"",lastName:"",password:"",rePassword:""}),u=i({username:"",password:""}),y=p(!1),_=p("I'm back in the U.S.S.R."),F=(R=n({},N),L={rePassword:{trigger:"input",validator:j(o)}},a(R,s(L)));var R,L;m(t,((e,a)=>{a&&(u.username="",u.password=""),a||(o.username="",o.firstName="",o.lastName="",o.password="",o.rePassword="")}));const q=async()=>{try{if(!(await O.post(k.login,u,{headers:n({},x())})).data.success)throw new Error("error");localStorage.setItem("username",u.username),r.push("/tasks")}catch(e){_.value="Something went wrong while trying to create user.",y.value=!0}},z=async()=>{const{password:e,rePassword:a}=o;if(e.trim().length<6||a.trim().length<6||e!==a)return _.value="Password did not match.",void(y.value=!0);try{if(!(await O.post(k.registaration,o,{headers:n({},x())})).data.success)throw new Error("error");localStorage.setItem("username",o.username),r.push("/tasks")}catch(s){_.value=(null==s?void 0:s.message)?s.message:"Something went wrong while trying to create user.",y.value=!0}};return(e,a)=>{const s=c("n-input"),r=c("n-form-item-row"),t=c("n-form"),n=c("n-button"),d=c("n-tab-pane"),p=c("n-tabs"),i=c("n-card"),m=c("n-alert");return w(),v("div",I,[f(i,{id:"auth_card"},{default:h((()=>[f(p,{"default-value":"signin",size:"large"},{default:h((()=>[f(d,{name:"signin",tab:"Sign in"},{default:h((()=>[f(t,null,{default:h((()=>[f(r,{label:"Username"},{default:h((()=>[f(s,{id:"input_field",type:"text",placeholder:"Username",autocomplete:"username",value:P(u).username,"onUpdate:value":a[0]||(a[0]=e=>P(u).username=e)},null,8,["value"])])),_:1}),f(r,{label:"Password"},{default:h((()=>[f(s,{type:"password","show-password-on":"mousedown",placeholder:"Password",autocomplete:"current-password",value:P(u).password,"onUpdate:value":a[1]||(a[1]=e=>P(u).password=e)},null,8,["value"])])),_:1})])),_:1}),f(n,{type:"primary",block:"",ghost:"",onClick:q},{default:h((()=>[E])),_:1})])),_:1}),f(d,{name:"signup",tab:"Sign Up"},{default:h((()=>[f(t,{ref:(e,a)=>{a.registerFormRef=e,l.value=e},model:P(o),rules:F},{default:h((()=>[f(r,{label:"First name",path:"firstName"},{default:h((()=>[f(s,{type:"text",id:"input_field",placeholder:"Firts name",value:P(o).firstName,"onUpdate:value":a[2]||(a[2]=e=>P(o).firstName=e)},null,8,["value"])])),_:1}),f(r,{label:"Last name",path:"lastName"},{default:h((()=>[f(s,{type:"text",placeholder:"Last name",value:P(o).lastName,"onUpdate:value":a[3]||(a[3]=e=>P(o).lastName=e)},null,8,["value"])])),_:1}),f(r,{label:"Username",path:"username"},{default:h((()=>[f(s,{type:"text",placeholder:"Enter username",autocomplete:"username",value:P(o).username,"onUpdate:value":a[4]||(a[4]=e=>P(o).username=e)},null,8,["value"])])),_:1}),f(r,{label:"Password",path:"password"},{default:h((()=>[f(s,{type:"password",placeholder:"Password","show-password-on":"mousedown",value:P(o).password,"onUpdate:value":a[5]||(a[5]=e=>P(o).password=e)},null,8,["value"])])),_:1}),f(r,{label:"Reenter Password",path:"rePassword"},{default:h((()=>[f(s,{type:"password",placeholder:"Password","show-password-on":"mousedown",value:P(o).rePassword,"onUpdate:value":a[6]||(a[6]=e=>P(o).rePassword=e)},null,8,["value"])])),_:1})])),_:1},8,["model"]),f(n,{type:"primary",block:"",ghost:"",onClick:z},{default:h((()=>[C])),_:1})])),_:1})])),_:1})])),_:1}),y.value?(w(),b(m,{key:0,title:"Error Text",type:"error",closable:"",onClose:a[7]||(a[7]=()=>y.value=!1)},{default:h((()=>[U(S(_.value),1)])),_:1})):g("",!0)])}}});F.__scopeId="data-v-81b98dbc";export{F as default};
